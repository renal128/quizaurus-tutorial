<html>

<body>
    <div id="quizaurus-root"></div>
    <link rel="stylesheet" href="http://localhost:8001/dist/QuizaurusApp.css">
    <script>
        window.openai = {
            "toolOutput": {
                "topic": "US history",
                "difficulty": "medium",
                "questions": [
                    {
                        "question": "Who was the first President of the United States?",
                        "options": ["Thomas Jefferson", "George Washington", "John Adams", "James Madison"],
                        "correctIndex": 1,
                        "explanation": "George Washington served as the first U.S. president from 1789 to 1797."
                    }, {
                        "question": "In which year was the Declaration of Independence adopted?",
                        "options": ["1776", "1787", "1789", "1812"],
                        "correctIndex": 0,
                        "explanation": "The Declaration of Independence was adopted on July 4, 1776."
                    }, {
                        "question": "The Louisiana Purchase (1803) transferred territory to the U.S. from which country?",
                        "options": ["Spain", "France", "Britain", "Mexico"],
                        "correctIndex": 1,
                        "explanation": "The U.S. purchased the territory from France in 1803, doubling the nation's size."
                    }, {
                        "question": "Who issued the Emancipation Proclamation?",
                        "options": ["Ulysses S. Grant", "Abraham Lincoln", "Andrew Johnson", "Theodore Roosevelt"],
                        "correctIndex": 1,
                        "explanation": "President Abraham Lincoln issued it in 1863, declaring freedom for enslaved people in rebelling states."
                    }, {
                        "question": "Which amendment granted women the right to vote in the U.S.?",
                        "options": ["15th Amendment", "19th Amendment", "14th Amendment", "21st Amendment"],
                        "correctIndex": 1,
                        "explanation": "The 19th Amendment was ratified in 1920, guaranteeing women's suffrage."
                    }, {
                        "question": "What event led directly to U.S. entry into World War II?",
                        "options": ["D-Day landings", "Attack on Pearl Harbor", "Battle of Britain", "Invasion of Poland"],
                        "correctIndex": 1,
                        "explanation": "Japan attacked Pearl Harbor on December 7, 1941, prompting U.S. entry into WWII."
                    }, {
                        "question": "Which Supreme Court case ended legal racial segregation in public schools?",
                        "options": ["Plessy v. Ferguson", "Brown v. Board of Education", "Roe v. Wade", "Dred Scott v. Sandford"],
                        "correctIndex": 1,
                        "explanation": "In 1954, Brown v. Board of Education ruled that segregated schools are unconstitutional."
                    }, {
                        "question": "Which state was the last to join the United States?",
                        "options": ["Alaska", "Arizona", "Hawaii", "New Mexico"],
                        "correctIndex": 2,
                        "explanation": "Hawaii became the 50th state on August 21, 1959."
                    }
                ]
            },
            "callTool": async (toolName, args) => {
                console.log(`callTool called with:`, { toolName, args });

                if (toolName === "score-quiz-results") {
                    // Mock response
                    const { correctAnswersCount, totalQuestionsCount } = args;
                    const successRate = 1.0 * correctAnswersCount / totalQuestionsCount;

                    let encouragement = "Keep practicing!";
                    if (successRate >= 0.9) encouragement = "Excellent!";
                    else if (successRate >= 0.7) encouragement = "Good job!";
                    else if (successRate >= 0.5) encouragement = "Not bad!";

                    return {
                        content: [],
                        structuredContent: {
                            encouragement,
                            successRate,
                        }
                    };
                }
                throw new Error(`Unknown tool: ${toolName}`);
            },
            "setWidgetState": async (state) => {
                console.log("setWidgetState called with:", state);
            },
            "sendFollowUpMessage": async (message) => {
                console.log("sendFollowUpMessage called with:", message);
            }
        }
    </script>
    <script type="module" src="http://localhost:8001/dist/QuizaurusApp.js"></script>
</body>

</html>